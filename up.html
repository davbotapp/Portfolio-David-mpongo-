
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Gestion Hébergement</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #0d1117;
      color: #c9d1d9;
    }

    header {
      text-align: center;
      padding: 20px;
      background: #161b22;
      color: #58a6ff;
      font-size: 24px;
      font-weight: bold;
      border-bottom: 1px solid #30363d;
    }

    nav {
      display: flex;
      justify-content: center;
      background: #161b22;
    }

    nav button {
      flex: 1;
      padding: 12px;
      background: #21262d;
      color: #58a6ff;
      border: none;
      cursor: pointer;
      font-weight: bold;
      border-bottom: 2px solid transparent;
    }

    nav button.active {
      border-bottom: 2px solid #58a6ff;
      background: #0d1117;
    }

    .container {
      padding: 20px;
 }

    input, button, label {
      display: block;
      width: 100%;
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 5px;
      border: none;
      font-size: 16px;
    }

    input {
      background: #21262d;
      color: #c9d1d9;
      border: 2px solid #30363d;
    }

    input.valid {
      border-color: #2ea043;
    }

    input.invalid {
      border-color: #f85149;
    }

    button {
      background: #238636;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background: #2ea043;
    }

    .site {
      background: #161b22;
      border: 1px solid #30363d;
      border-left: 4px solid #58a6ff;
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 5px;
    }

    .site p {
      margin: 5px 0;
    }

    .hidden {
      display: none;
    }

    .danger {
      background: #f85149;
      border: none;
      color: white;
      padding: 10px;
      margin-top: 10px;
    }

    .danger:hover {
      background: #da3633;
    }
  </style>
</head>
<body>
  <header>Davbot Hébergement</header>

  <nav>
    <button class="active" onclick="showTab('add')">Ajouter</button>
    <button onclick="showTab('list')">Liste</button>
  </nav>

  <div class="container">
    <div id="add" class="tab">
 <label for="name">Nom du site :</label>
      <input type="text" id="name" placeholder="Ex: Mon Site">

      <label for="url">URL :</label>
      <input type="text" id="url" placeholder="https://exemple.com">

      <label for="port">Port :</label>
      <input type="number" id="port" placeholder="Ex: 8080">

      <button onclick="addSite()">Ajouter</button>
    </div>

    <div id="list" class="tab hidden">
      <div id="sitesContainer"></div>
      <button class="danger" onclick="clearSites()">Vider le stockage</button>
    </div>
  </div>

  <script>
    function showTab(tabId) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.add('hidden'));
      document.getElementById(tabId).classList.remove('hidden');
      document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      if (tabId === 'list') loadSites();
    }

    function isValidURL(url) {
      try {
        new URL(url);
        return true;
      } catch (e) {
        return false;
      }
    }

    function addSite() {
      const name = document.getElementById("name").value.trim();
      const url = document.getElementById("url").value.trim();
      const port = document.getElementById("port").value.trim();
      const urlInput = document.getElementById("url");

      if (!isValidURL(url)) {
        urlInput.classList.add("invalid");
        urlInput.classList.remove("valid");
        alert("URL invalide !");
        return;
      } else {
        urlInput.classList.remove("invalid");
        urlInput.classList.add("valid");
      }

      const site = { name, url, port };
      const existing = JSON.parse(localStorage.getItem("hebergements")) || [];
      existing.push(site);
      localStorage.setItem("hebergements", JSON.stringify(existing));

      document.getElementById("name").value = "";
      document.getElementById("url").value = "";
      document.getElementById("port").value = "";
      urlInput.classList.remove("valid");

      alert("Hébergement enregistré !");
    }

    function loadSites() {
      const container = document.getElementById("sitesContainer");
      container.innerHTML = "";
      const sites = JSON.parse(localStorage.getItem("hebergements")) || [];

      if (sites.length === 0) {
        container.innerHTML = "<p>Aucun hébergement enregistré.</p>";
        return;
      }

      sites.forEach(site => {
        const el = document.createElement("div");
        el.className = "site";
        el.innerHTML = `<p><strong>Nom :</strong> ${site.name}</p>
          <p><strong>URL :</strong> <a href="{site.url}" target="_blank" style="color:#3fb950;">${site.url}</a></p>
          <p><strong>Port :</strong>${site.port}</p>
        `;
        container.appendChild(el);
      });
    }

    function clearSites() {
      localStorage.removeItem("hebergements");
      loadSites();
    }
  </script>
</body>
</html>
